
@import b3.inline.fieldConstructor
@(user_id: String, yyyy: String, mm: String)(implicit messages:Messages)

@VERSION_SYMBOL = @{ Version.getVersionSymbol }
@EMPLOYEE_CODE = @{ Employees.getEmployeeCode(user_id) }
@YEAR = @{ CalendarDates.GetNowYear }
@MONTH = @{ CalendarDates.GetNowMonth }
@YEARS = @{ CalendarDates.GetNowYear + "/" + CalendarDates.GetNowMonth }
@FISCAL_YEAR = @{ CalendarDates.GetFiscalYear}
@EmployeeType = @{ Employees.getEmployeeType(user_id) }

<html lang="ja">
    <head>
        <!-- ヘッダー共通部分 引数はページタイトル -->
        @common_header("タイムカード確認")
        <!-- 個別の読み込みが必要な場合はここに追加で記述 -->
        <!-- 新ヘッダー用JS -->
        <script src="@routes.Assets.versioned("javascripts/headerUtility.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/headerCurrentTime.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/headerTimeCard.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/headerDropDown.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/headerNavigationHeader.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/headerNavigationMenu.js")" type="text/javascript"></script>
        <!-- datepicker使用のための読込 -->
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("bootstrap-datepicker.min.js"))'></script>
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("bootstrap-datepicker.ja.min.js"))'></script>
        <script src="@routes.Assets.versioned("javascripts/datePicker.js")" type="text/javascript"></script>
        <!-- ページコンテンツ構成用のJS -->
        <script src="@routes.Assets.versioned("javascripts/commonFilter.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/tableTimeCard.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("javascripts/showTimeCard.js")" type="text/javascript"></script>
        <!-- ヘッダーおよび列固定ライブラリ -->
        <script src="@routes.Assets.versioned("javascripts/jquery.tablefix.js")" type="text/javascript"></script>
    </head>
    <body>
        <div id="id-page-body"></div>
        @common_config(user_id)
        <script>
            var submenuConfig = {
                role: {
                    isManager: "@RoleControl.getManager(user_id)",
                    isBusiness: "@RoleControl.getBusiness(user_id)"
                },
                moveURL: {
                    timecardEdit: "@routes.TimeCardController.edit(VERSION_SYMBOL, EMPLOYEE_CODE, YEAR, MONTH)",
                    timecardShow: "@routes.TimeCardController.show(VERSION_SYMBOL, YEAR, MONTH)"
                }
            }
            var mainConfig = {
                empID: "@Employees.GetEmployeeId(user_id)",
                datepicker: {
                    config: {
                        action:"@routes.TimeCardController.redirectShow",
                        language: "ja",
                        format: "yyyy-mm",
                        startDate: "2017-04",
                        minViewMode : 1,
                        autoclose: true,
                        default: "@yyyy" + "-" + "@mm",
                        customStyle: { "width": 80 }
                    }
                },
                role: {
                    isManager: "@RoleControl.getManager(user_id)",
                    isBusiness: "@RoleControl.getBusiness(user_id)"
                },
                jsonURL:{
                    getTimeCard: "@routes.TimeCardController.getGeneralInfo(yyyy, mm)",
                    getInternalDivision: "@routes.Types.getInternalDivision",
                    getCustomGroup: "@routes.GroupContrller.getInfo",
                    getManageList: "@routes.ManageUserEdit.getList",
                },
                img: {
                    title: "/assets/images/ic_description_black_18dp.png"
                }
            }
            renderPageBody(headerConfig, submenuConfig, mainConfig);
        </script>
        <script>
            $(function() {
                // class付与←submenuをactiveにするため
                $("#timecard_show").parent().addClass("active");
            })
        </script>
    </body>
</html>